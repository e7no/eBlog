<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>Windows下用Vagrant搭建Linux开发环境</title>
      <link href="/2017/09/01/Windows%E4%B8%8B%E7%94%A8Vagrant%E6%90%AD%E5%BB%BALinux%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
      <content type="html"><![CDATA[<blockquote><p>Vagrant下载地址：<a href="https://note.youdao.com/" target="_blank" rel="noopener">https://www.vagrantup.com/downloads.html</a></p></blockquote><blockquote><p>VirtualBox下载地址：<a href="https://note.youdao.com/" target="_blank" rel="noopener">https://www.virtualbox.org/wiki/Downloads</a></p></blockquote><blockquote><p>VagrantBox镜像下载地址：<a href="https://note.youdao.com/" target="_blank" rel="noopener">http://www.vagrantbox.es/</a></p></blockquote><h6 id="执行终端-GitBash-或者-cmd"><a href="#执行终端-GitBash-或者-cmd" class="headerlink" title="执行终端: GitBash 或者 cmd"></a>执行终端: GitBash 或者 cmd</h6><h3 id="1-安装软件"><a href="#1-安装软件" class="headerlink" title="1.安装软件"></a>1.安装软件</h3><h5 id="先安装VirtualBox-然后安装Vagrant"><a href="#先安装VirtualBox-然后安装Vagrant" class="headerlink" title="先安装VirtualBox,然后安装Vagrant"></a>先安装VirtualBox,然后安装Vagrant</h5><h3 id="2-1-直接在线拉取镜像"><a href="#2-1-直接在线拉取镜像" class="headerlink" title="2.1 直接在线拉取镜像"></a>2.1 直接在线拉取镜像</h3><h5 id="https-www-virtualbox-org-wiki-Downloads"><a href="#https-www-virtualbox-org-wiki-Downloads" class="headerlink" title="https://www.virtualbox.org/wiki/Downloads"></a><a href="https://note.youdao.com/" target="_blank" rel="noopener">https://www.virtualbox.org/wiki/Downloads</a></h5><p>备注：{title} box命名 {url} 镜像地址  （在线拉镜像速度会比较慢）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant box add &#123;title&#125; &#123;url&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-或导入下载镜像"><a href="#2-2-或导入下载镜像" class="headerlink" title="2.2 或导入下载镜像"></a>2.2 或导入下载镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant init centos6.8</span><br></pre></td></tr></table></figure><h6 id="把下载的centos-6-8-x86-64-box复制到本目录-D-www-box下，执行"><a href="#把下载的centos-6-8-x86-64-box复制到本目录-D-www-box下，执行" class="headerlink" title="把下载的centos-6.8-x86_64.box复制到本目录 D:www/box下，执行"></a>把下载的centos-6.8-x86_64.box复制到本目录 D:www/box下，执行</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant box add centos6.8 centos-6.8-x86_64.box</span><br></pre></td></tr></table></figure><h3 id="3-初始化Box"><a href="#3-初始化Box" class="headerlink" title="3.初始化Box"></a>3.初始化Box</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant init &#123;title&#125;</span><br></pre></td></tr></table></figure><h3 id="4-启动Box"><a href="#4-启动Box" class="headerlink" title="4.启动Box"></a>4.启动Box</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant up</span><br></pre></td></tr></table></figure><h3 id="5-配置Vagrantfile"><a href="#5-配置Vagrantfile" class="headerlink" title="5.配置Vagrantfile"></a>5.配置Vagrantfile</h3><h5 id="常用配置："><a href="#常用配置：" class="headerlink" title="常用配置："></a>常用配置：</h5><ul><li>box命名</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.vm.box = &quot;centos6.7&quot;</span><br></pre></td></tr></table></figure><ul><li>端口映射</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 80</span><br></pre></td></tr></table></figure><ul><li style="list-style: none"><input type="checkbox" checked> <em>也可以添加多个</em></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">config.vm.network &quot;forwarded_port&quot;, guest: 87, host: 8087</span><br><span class="line">config.vm.network &quot;forwarded_port&quot;, guest: 88, host: 8088</span><br><span class="line">config.vm.network &quot;forwarded_port&quot;, guest: 89, host: 8089</span><br><span class="line">config.vm.network &quot;forwarded_port&quot;, guest: 3306, host: 33060</span><br></pre></td></tr></table></figure><ul><li><p>目录映射(可以不设置，默认将Linux下的vagrant共享到当前box目录)</p></li><li><p>[x]  <em>表示把本机的data目录共享到虚拟机里的/var/www目录</em></p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.vm.synced_folder &quot;D:/www&quot;, &quot;/var/www/html&quot;</span><br></pre></td></tr></table></figure><ul><li>ip设置</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.vm.network &quot;public_network&quot;,ip:&quot;192.168.56.1&quot;</span><br></pre></td></tr></table></figure><h3 id="6-重启vagrant加载新的配置项"><a href="#6-重启vagrant加载新的配置项" class="headerlink" title="6.重启vagrant加载新的配置项"></a>6.重启vagrant加载新的配置项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant reload</span><br></pre></td></tr></table></figure><h3 id="7-导出Box在其他机器上运行，免去重新部署"><a href="#7-导出Box在其他机器上运行，免去重新部署" class="headerlink" title="7.导出Box在其他机器上运行，免去重新部署"></a>7.导出Box在其他机器上运行，免去重新部署</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant package</span><br></pre></td></tr></table></figure><h3 id="8-其他命令解释"><a href="#8-其他命令解释" class="headerlink" title="8.其他命令解释"></a>8.其他命令解释</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">vagrant box add &quot;boxIdentity&quot; remoteUrlorLocalFile  添加box</span><br><span class="line">vagrant init &quot;boxIdentity&quot;  初始化box</span><br><span class="line">vagrant up  启动虚拟机</span><br><span class="line">vagrant ssh  登录虚拟机</span><br><span class="line">vagrant box list  显示当前已添加的box列表</span><br><span class="line">vagrant box remove &quot;boxIdentity&quot;  删除box</span><br><span class="line">vagrant destroy  停止当前正在运行的虚拟机并销毁所有创建的资源</span><br><span class="line">vagrant halt  关闭虚拟机</span><br><span class="line">vagrant package  打包当前运行的虚拟机的环境</span><br><span class="line">vagrant plugin  用于安装卸载插件</span><br><span class="line">vagrant reload  重启虚拟机，主要用于重新载入配置文件</span><br><span class="line">vagrant suspend  挂起虚拟机</span><br><span class="line">vagrant resume  恢复挂起状态</span><br><span class="line">vagrant ssh-config  输出ssh连接信息</span><br><span class="line">vagrant status  输出当前虚拟机的状态</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Vagrant </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vagrant </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>基于Centos部署Docker环境</title>
      <link href="/2017/03/02/%E5%9F%BA%E4%BA%8ECentos%E9%83%A8%E7%BD%B2Docker%E7%8E%AF%E5%A2%83/"/>
      <content type="html"><![CDATA[<h4 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos:6.8</span><br></pre></td></tr></table></figure><h4 id="将这个镜像启动成为一个容器-并映射端口"><a href="#将这个镜像启动成为一个容器-并映射端口" class="headerlink" title="将这个镜像启动成为一个容器,并映射端口"></a>将这个镜像启动成为一个容器,并映射端口</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -d --name www -p 33060:3306 -p 220:22 -p 8080:80 centos：6.8 /bin/bash</span><br></pre></td></tr></table></figure><h4 id="查看创建的镜像"><a href="#查看创建的镜像" class="headerlink" title="查看创建的镜像"></a>查看创建的镜像</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><h4 id="进入创建的镜像容器"><a href="#进入创建的镜像容器" class="headerlink" title="进入创建的镜像容器"></a>进入创建的镜像容器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it &lt;container ID&gt; bash</span><br></pre></td></tr></table></figure><h4 id="安装ifconfig"><a href="#安装ifconfig" class="headerlink" title="安装ifconfig"></a>安装ifconfig</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install net-tools –y</span><br></pre></td></tr></table></figure><h4 id="安装ssh服务"><a href="#安装ssh服务" class="headerlink" title="安装ssh服务"></a>安装ssh服务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install openssh*</span><br></pre></td></tr></table></figure><h4 id="安装压缩解压缩"><a href="#安装压缩解压缩" class="headerlink" title="安装压缩解压缩"></a>安装压缩解压缩</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y unzip zip</span><br></pre></td></tr></table></figure><h4 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure><h4 id="创建SSH服务目录"><a href="#创建SSH服务目录" class="headerlink" title="创建SSH服务目录"></a>创建SSH服务目录</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /var/run/sshd</span><br></pre></td></tr></table></figure><h4 id="设置秘钥"><a href="#设置秘钥" class="headerlink" title="设置秘钥"></a>设置秘钥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key</span><br><span class="line">ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key</span><br></pre></td></tr></table></figure><h4 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/sshd -D &amp;</span><br></pre></td></tr></table></figure><h4 id="查看SSH监听端口使用情况"><a href="#查看SSH监听端口使用情况" class="headerlink" title="查看SSH监听端口使用情况"></a>查看SSH监听端口使用情况</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tunlp</span><br></pre></td></tr></table></figure><h4 id="取消pam登录限制"><a href="#取消pam登录限制" class="headerlink" title="取消pam登录限制"></a>取消pam登录限制</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -ri &apos;s/session required pam_loginuid.so/#session required pam_loginuid.so/g&apos; /etc/pam.d/ssh</span><br></pre></td></tr></table></figure><h4 id="本地创建公钥（非docker环境）-已有则不需要创建"><a href="#本地创建公钥（非docker环境）-已有则不需要创建" class="headerlink" title="本地创建公钥（非docker环境）,已有则不需要创建"></a>本地创建公钥（非docker环境）,已有则不需要创建</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><h4 id="创建授权目录"><a href="#创建授权目录" class="headerlink" title="创建授权目录"></a>创建授权目录</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir root/.ssh</span><br></pre></td></tr></table></figure><h4 id="编辑授权文件-复制本地-ssh目录中的id-rsa-pub里面的密钥到授权文件中"><a href="#编辑授权文件-复制本地-ssh目录中的id-rsa-pub里面的密钥到授权文件中" class="headerlink" title="编辑授权文件,复制本地.ssh目录中的id_rsa.pub里面的密钥到授权文件中"></a>编辑授权文件,复制本地.ssh目录中的id_rsa.pub里面的密钥到授权文件中</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /root/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><h4 id="创建自动启动SSH服务器的可执行文件run-sh-并添加可执行权限"><a href="#创建自动启动SSH服务器的可执行文件run-sh-并添加可执行权限" class="headerlink" title="创建自动启动SSH服务器的可执行文件run.sh,并添加可执行权限"></a>创建自动启动SSH服务器的可执行文件run.sh,并添加可执行权限</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /run.sh</span><br><span class="line">chmod +x run.sh</span><br></pre></td></tr></table></figure><h4 id="编辑run-sh"><a href="#编辑run-sh" class="headerlink" title="编辑run.sh"></a>编辑run.sh</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">/usr/sbin/sshd -D</span><br></pre></td></tr></table></figure><h4 id="通过Xshell登录该镜像-地址为docker的IP，端口号为220-账号为：root-密码为上面设置的密码"><a href="#通过Xshell登录该镜像-地址为docker的IP，端口号为220-账号为：root-密码为上面设置的密码" class="headerlink" title="通过Xshell登录该镜像,地址为docker的IP，端口号为220,账号为：root,密码为上面设置的密码"></a>通过Xshell登录该镜像,地址为docker的IP，端口号为220,账号为：root,密码为上面设置的密码</h4><hr>]]></content>
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
